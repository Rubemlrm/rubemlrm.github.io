I"à<p>Recentemente foi-me lan√ßado o desafio de migrar um servidor de svn para git , e comecei logo a procura de importa√ß√µes directas,
sendo que encontrei sugest√µes tais como o  <a href="https://github.com/nirvdrum/svn2git/" title="svn2git">svn2git</a> e <a href="http://subgit.com/,&quot;subit&quot;">subGit</a>.</p>

<p>No entanto n√£o se adequavam ao que se pretendia fazer, ent√£o ap√≥s mais alguma pesquisa, encontrei v√°rias refer√™ncias a um comando do git que permitia
clonar um reposit√≥rio de SVN para Git e conseguir <strong>manter o hist√≥rico</strong> do mesmo sem configura√ßoes extra ou programa externos. O comando em causa √© o</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">git svn clone http://svn/</code></pre></figure>

<p>Atr√°ves deste comando √© efectuado um pedido ao servidor de svn e ser√° criada uma nova direct√≥ria para o reposit√≥rio em causa, sendo que este comando tem a possibilidade de aceitar os parametros que podem ser passados para os <strong>init</strong> e <strong>fetch</strong> da utiliza√ß√£o de git.
No entanto de nada nos serve um clone de um
reposit√≥rio sem os logs e o mapeamento dos autores dos commits para o sistema que est√° a ser utilizado. Para tal basta utilizar os seguintes comandos.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">svn log <span class="nt">--xml</span> | <span class="nb">grep</span> <span class="s2">"&lt;author&gt;"</span> | <span class="nb">sort</span> <span class="nt">-u</span> | perl <span class="nt">-pe</span> <span class="s1">'s/.*&gt;(.*?)&lt;.*/$1 = /'</span> | <span class="nb">tee </span>users.txt</code></pre></figure>

<p>Este primeiro comando dever√° ser executado no servidor de svn actual , com este comando ser√° possivel gerar um ficheiro com as informa√ß√µes relativas a todos
os autores de commits do svn em causa. Este ficheiro ser√° utilizado como ficheiro de mapeamento de migra√ß√£o de commits e logs para o Git.</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">git svn clone <span class="nt">--stdlayout</span> <span class="nt">--no-metadata</span> <span class="nt">--authors-file</span><span class="o">=</span>users.txt svn://hostname/path dest_dir-tmp</code></pre></figure>

<p>Este segundo comando ir√° fazer clone do reposit√≥rio no servidor de SVN e ir√° criar um reposit√≥rio de Git local, com a informa√ß√£o de todos os commits e logs deste novo reposit√≥rio.
Ser√° necess√°rio ainda especificar o <strong>remote origin</strong> que iremos utilizar para todas as a√ß√µes futuras , para tal basta executar os seguintes comandos:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell">git remote add origin git@server:user/project-name.git
git push origin <span class="nt">--all</span></code></pre></figure>

<p>A partir deste momento ser√° possivel sincronizar o reposit√≥rio migrado com o servidor de Git.</p>
:ET